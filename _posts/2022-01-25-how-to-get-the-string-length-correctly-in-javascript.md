---
title: åœ¨ JavaScript ä¸­æ€æ ·æ­£ç¡®è·å–å­—ç¬¦ä¸²é•¿åº¦
date: 2022-01-25
author: æ´‹å­
tags:
  - å‰ç«¯
  - JavaScript
---

è¯´èµ·è·å–å­—ç¬¦ä¸²é•¿åº¦ï¼Œæœ‰äººè¯´é‚£è¿˜ä¸ç®€å•ï¼Ÿç›´æ¥ `string.length` ä¸å°±å¥½äº†ã€‚å¯å®é™…ä¸Šè¦æ­£ç¡®è·å–å­—ç¬¦ä¸²é•¿åº¦è¿˜æ˜¯æ²¡é‚£ä¹ˆå®¹æ˜“çš„ï¼Œä¸ä¿¡å¾€ä¸‹çœ‹ã€‚

## ä¾‹å­

çœ‹ä¸‹é¢çš„ä¾‹å­

```js
// --run--

console.log('abc'.length) // æ‰“å°ç»“æœ: 3
console.log('abğ„'.length) // æ‰“å°ç»“æœ: 4
console.log('abğŸ‡¨ğŸ‡³'.length) // æ‰“å°ç»“æœ: 6
```

å¯ä»¥çœ‹åˆ°ï¼ŒåŒæ ·æ˜¯ä¸‰ä¸ªå­—ç¬¦ï¼Œå¯æœ€åæ‰“å°çš„ç»“æœå´ä¸ä¸€æ ·ï¼

å†çœ‹çœ‹å…¶ä»–è¯­è¨€æƒ…å†µæ€æ ·ï¼Œæ¯”å¦‚ Python

```python
# --run--

print(len('abc')) # æ‰“å°ç»“æœ: 3
print(len('abğ„')) # æ‰“å°ç»“æœ: 3
print(len('abğŸ‡¨ğŸ‡³')) # æ‰“å°ç»“æœ: 4
```

å¥½å§ï¼Œä¹Ÿä¸èƒ½å®Œç¾å¤„ç†

## é—®é¢˜åŸå› 

å…¶å®è¿™ä¸ªé—®é¢˜åœ¨ MDN æ–‡æ¡£ä¸­ [String.length - JavaScript | MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/length) æ—©å·²æè¿°è¿‡ã€‚

> JavaScript ä½¿ç”¨ UTF-16 ç¼–ç ï¼Œè¯¥ç¼–ç ä½¿ç”¨ä¸€ä¸ª 16 æ¯”ç‰¹çš„ç¼–ç å•å…ƒæ¥è¡¨ç¤ºå¤§éƒ¨åˆ†å¸¸è§çš„å­—ç¬¦ï¼Œä½¿ç”¨ä¸¤ä¸ªä»£ç å•å…ƒè¡¨ç¤ºä¸å¸¸ç”¨çš„å­—ç¬¦ã€‚å› æ­¤ length è¿”å›å€¼å¯èƒ½ä¸å­—ç¬¦ä¸²ä¸­å®é™…çš„å­—ç¬¦æ•°é‡ä¸ç›¸åŒã€‚

ä¹Ÿå°±æ˜¯è¯´å¯¹äºä¸€ä¸ªå­—ç¬¦ï¼Œåœ¨ JS å†…éƒ¨æ˜¯ä»¥ 2 ä¸ªå­—èŠ‚æ¥ä¿å­˜ã€‚ä½†æ˜¯æœ‰äº›å­—ç¬¦ä¸²æ˜¯ 4 å­—èŠ‚çš„ï¼Œæ¯”å¦‚ `ğ„`ï¼Œé‚£ä¹ˆå°±ä¼šå ç”¨ä¸¤ä¸ªå•å…ƒï¼Œç”šè‡³ä¸€äº› Emoji ä¼šå ç”¨æ›´å¤šï¼è€Œ `String.length` æ˜¯è¿”å›çš„å­—ç¬¦å•å…ƒæ•°è€Œä¸æ˜¯å­—ç¬¦æ•°é‡ï¼Œå°±äº§ç”Ÿäº†è¿™ä¸ªé—®é¢˜ã€‚

ä¸ºä»€ä¹ˆ `String.length` è¦è¿”å›å­—ç¬¦å•å…ƒæ•°è€Œä¸æ˜¯å­—ç¬¦æ•°é‡å‘¢ï¼ŸåŒæ ·çš„ Java è¯­è¨€ä¹Ÿæ˜¯è¿™æ ·åšçš„ã€‚æˆ‘çš„æƒ³æ³•æ˜¯ä¸ºäº†ç¨‹åºæ‰§è¡Œæ•ˆç‡ã€‚é’ˆå¯¹å˜é•¿çš„å­—ç¬¦ä¸²ï¼Œè¦è¿”å›æ­£ç¡®çš„å­—ç¬¦æ•°é‡ï¼Œéœ€è¦æ‰«ææ•´ä¸ªå­—ç¬¦ä¸²ã€‚è€Œè¿”å›å•å…ƒé•¿åº¦ï¼Œåªéœ€è¦å°†åˆ†é…çš„å†…å­˜æ•°é‡é™¤ä»¥æ¯ä¸ªå•å…ƒé•¿åº¦å°±å¥½äº†ï¼Œä¸éœ€è¦æ‰«ææ•´ä¸ªå­—ç¬¦ä¸²ã€‚

## å­—ç¬¦ä¸²æ‹†æˆæ•°ç»„

æ‰§è¡Œä¸‹é¢ä»£ç 

```js
// --run--

console.log('abğ„'.split('')) // æ‰“å°ç»“æœ: ["a","b","\ud834","\udd1e"]
console.log(['abğ„'[2]]) // æ‰“å°ç»“æœ: ["\ud834"]
console.log([...'abğ„']) // æ‰“å°ç»“æœ: ["a","b","ğ„"]
console.log(Array.from('abğ„')) // æ‰“å°ç»“æœ: ["a","b","ğ„"]
console.log([...'abğŸ‡¨ğŸ‡³']) // æ‰“å°ç»“æœ: ["a","b","ğŸ‡¨","ğŸ‡³"]
console.log(Array.from('abğŸ‡¨ğŸ‡³')) // æ‰“å°ç»“æœ: ["a","b","ğŸ‡¨","ğŸ‡³"]
```

å¯ä»¥çœ‹åˆ°ï¼Œæ™®é€šçš„ `split` æ–¹æ³•å’Œç›´æ¥ä¸‹æ ‡çš„æ–¹æ³•ï¼Œä¸èƒ½æ­£ç¡®å°†å­—ç¬¦ä¸²æ‹†åˆ†æˆæ•°ç»„ã€‚è€Œ ES6 çš„è§£æ„å†™æ³•å’Œ `Array.from` åˆ™èƒ½æ­£ç¡®å¤„ç†ä¸€éƒ¨åˆ†çš„å­—ç¬¦ï¼Œä½†ä¹Ÿä¸èƒ½å®Œç¾å¤„ç†æŸäº› Emoji çš„æƒ…å†µã€‚

çœ‹ MDN ä¸Šæä¾›çš„ [Polyfill](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/from#polyfill) å’Œ ç›¸å…³çš„ [ES è§„èŒƒ](https://tc39.es/ecma262/#sec-array.from)ï¼Œè²Œä¼¼ä¹Ÿæ²¡å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚è¿è¡Œ Polyfill çš„ `Array.from` æ–¹æ³•ä¹Ÿä¸èƒ½æ­£ç¡®åˆ†å‰²å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥åªèƒ½çŒœæµ‹æ˜¯ Chrome å†…éƒ¨å®ç°å¤„ç†äº†ä¸€éƒ¨åˆ†è¿™ç§å¤šå­—èŠ‚å­—ç¬¦é—®é¢˜ã€‚

## ç»“è®º

1. åœ¨ JavaScript ä¸­ï¼ŒæŸäº›æƒ…å†µä¸‹ `String.length` è¿”å›çš„ä¸æ˜¯å­—ç¬¦æ•°é‡ã€‚åŒæ ·çš„é—®é¢˜å¯èƒ½ä¹Ÿå­˜åœ¨å…¶ä»–è¯­è¨€ä¸­ï¼Œå¦‚ Python å’Œ Javaã€‚
2. å¤šå­—èŠ‚å­—ç¬¦çš„å¤„ç†æ¯”è¾ƒéº»çƒ¦ï¼Œçœ‹åˆ°çš„å’Œå†…éƒ¨ä¿å­˜çš„ä¸ä¸€è‡´æˆ–è®¸ç®—æ˜¯æ­£å¸¸è¡Œä¸ºã€‚æ¯”å¦‚æŸäº› Emoji é…åˆå­—ä½“æŠŠä¸¤ä¸ªå­—ç¬¦åˆ†å¼€æˆ–ç»“åˆå±•ç¤ºä¹Ÿæ˜¯å¾ˆæ­£å¸¸ã€‚è¿™é‡Œé¢æœ‰æ›´æ·±çš„å­¦é—®ï¼Œç¼–è¾‘å™¨/æµè§ˆå™¨éš¾åšå‘€ï¼Œè‡´æ•¬ VSCodeã€Chromeã€‚
3. `[...'abğ„']` æˆ– `Array.from('abğ„')` å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šè§£å†³ä¸€äº›å®é™…é—®é¢˜ã€‚
3. éœ€è¦æ³¨æ„**å®‰å…¨é—®é¢˜**ã€‚æ¯”å¦‚ç¨‹åºä¸æ­£ç¡®å¤„ç†äº†å¤šå­—èŠ‚å­—ç¬¦ä¸²çš„æ‹†åˆ†æ‹¼æ¥ï¼Œå¯¼è‡´å­—ç¬¦é€ƒé€¸ï¼›æˆ–è€…å­—ç¬¦æ•°é‡è®¡ç®—ä¸æ­£ç¡®ï¼Œç»•è¿‡ä¸€äº›é™åˆ¶ï¼Œè¿™æ–¹é¢å¯ä»¥å†æŒ–æ˜ä¸€ä¸‹ã€‚

> æœ¬æ–‡ç”±ã€Œ[Yank Note - ä¸€æ¬¾é¢å‘ç¨‹åºå‘˜çš„ Markdown ç¬”è®°åº”ç”¨](https://github.com/purocean/yn)ã€æ’°å†™
